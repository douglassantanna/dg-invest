"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[144],{144:(T,u,a)=>{a.r(u),a.d(u,{ViewUsersComponent:()=>E});var e=a(4438),o=a(4341),m=a(3443),d=function(t){return t[t.Admin=1]="Admin",t[t.User=2]="User",t}(d||{}),p=a(3587);function g(t,i){1&t&&e.EFF(0,"Name is required.")}function f(t,i){1&t&&e.EFF(0,"Name must be at least 2 characters long.")}function b(t,i){if(1&t&&(e.j41(0,"div",5),e.DNE(1,g,1,0)(2,f,1,0),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.vxM(1,null!=r.fullName.errors&&r.fullName.errors.required?1:-1),e.R7$(),e.vxM(2,null!=r.fullName.errors&&r.fullName.errors.minlength?2:-1)}}function h(t,i){1&t&&e.EFF(0,"Email is required.")}function x(t,i){1&t&&e.EFF(0,"Email is invalid.")}function y(t,i){if(1&t&&(e.j41(0,"div",5),e.DNE(1,h,1,0)(2,x,1,0),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.vxM(1,null!=r.email.errors&&r.email.errors.required?1:-1),e.R7$(),e.vxM(2,null!=r.email.errors&&r.email.errors.email?2:-1)}}function C(t,i){if(1&t&&(e.j41(0,"option",8),e.EFF(1),e.k0s()),2&t){const r=i.$implicit;e.Y8G("value",r.id),e.R7$(),e.JRh(r.name)}}function v(t,i){1&t&&e.nrm(0,"span",10)}let k=(()=>{class t{constructor(){this.fb=(0,e.WQX)(o.ok),this.userService=(0,e.WQX)(m.D),this.userCreated=(0,e.CGW)(),this.btnColor=p.c.btnColor,this.loading=(0,e.vPA)(!1),this.title="New user",this.roleId=0,this.roles=[{id:1,name:"admin"},{id:2,name:"user"}],this.createUserForm=this.fb.group({fullName:["",[o.k0.minLength(2),o.k0.maxLength(225)]],email:["",[o.k0.email]],role:[0]})}submit(){this.loading.set(!0);const r=this.getRole();if(void 0===r)return;const n={fullName:this.fullName.value,email:this.email.value,role:r};this.userService.createUser(n).subscribe({next:()=>{this.loading.set(!1),this.userCreated.emit(n)},error:s=>{this.loading.set(!1)}})}get fullName(){return this.createUserForm.get("fullName")}get email(){return this.createUserForm.get("email")}getRole(){return 1==this.createUserForm.value?.role?d.Admin:d.User}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-create-user"]],outputs:{userCreated:"userCreated"},standalone:!0,features:[e.aNF],decls:23,vars:6,consts:[[1,"w-60","text-left","flex","flex-col","justify-start"],[1,"text-xl","font-semibold","text-gray-900","dark:text-gray-100"],[1,"space-y-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","formControlName","fullName","required","","maxlength","220","minlength","2",1,"w-full","px-4","py-2","text-gray-900","bg-white","dark:bg-gray-700","dark:text-gray-100","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400"],["type","email","formControlName","email","required","","maxlength","220",1,"w-full","px-4","py-2","text-gray-900","bg-white","dark:bg-gray-700","dark:text-gray-100","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","role","required","",1,"w-full","px-4","py-2","text-gray-900","bg-white","dark:bg-gray-700","dark:text-gray-100","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[3,"value"],["type","button",1,"mt-4","w-full","flex","justify-center","items-center","py-2","px-4","bg-blue-500","text-white","font-bold","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:bg-blue-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"ml-2","inline-block","h-4","w-4","animate-spin","rounded-full","border-2","border-white","border-t-transparent"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2),e.k0s(),e.j41(3,"form",2)(4,"div")(5,"label",3),e.EFF(6,"Full name"),e.k0s(),e.nrm(7,"input",4),e.DNE(8,b,3,2,"div",5),e.k0s(),e.j41(9,"div")(10,"label",3),e.EFF(11,"Email address"),e.k0s(),e.nrm(12,"input",6),e.DNE(13,y,3,2,"div",5),e.k0s(),e.j41(14,"div")(15,"label",3),e.EFF(16,"Role"),e.k0s(),e.j41(17,"select",7),e.Z7z(18,C,2,2,"option",8,e.Vm6),e.k0s()()(),e.j41(20,"button",9),e.bIt("click",function(){return s.submit()}),e.EFF(21," Save "),e.DNE(22,v,1,0,"span",10),e.k0s()()),2&n&&(e.R7$(2),e.JRh(s.title),e.R7$(),e.Y8G("formGroup",s.createUserForm),e.R7$(5),e.vxM(8,s.fullName.invalid&&(s.fullName.dirty||s.fullName.touched)?8:-1),e.R7$(5),e.vxM(13,s.email.invalid&&(s.email.dirty||s.email.touched)?13:-1),e.R7$(5),e.Dyx(s.roles),e.R7$(2),e.Y8G("disabled",!s.createUserForm.valid||s.loading()),e.R7$(2),e.vxM(22,s.loading()?22:-1))},dependencies:[o.YN,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.YS,o.xh,o.tU,o.X1,o.j4,o.JD]})}}return t})();var F=a(1413),U=a(4412),w=a(6977),N=a(5107),c=a(177);const j=(t,i)=>({"px-2 py-1 text-xs font-medium rounded-full":!0,"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":t,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":i});function $(t,i){if(1&t&&(e.j41(0,"tr",10)(1,"td",11),e.EFF(2),e.k0s(),e.j41(3,"td",11),e.EFF(4),e.k0s(),e.j41(5,"td",12)(6,"span",13),e.EFF(7),e.k0s()()()),2&t){const r=i.$implicit;e.R7$(2),e.JRh(r.fullName),e.R7$(2),e.JRh(r.email),e.R7$(2),e.Y8G("ngClass",e.l_i(4,j,1==r.role,1!=r.role)),e.R7$(),e.SpI(" ",1==r.role?"Admin":"User"," ")}}function _(t,i){if(1&t){const r=e.RV6();e.j41(0,"app-modal",14),e.bIt("close",function(){e.eBV(r);const s=e.XpG();return e.Njj(s.toggleCreateUserModal())}),e.j41(1,"app-create-user",15),e.bIt("userCreated",function(s){e.eBV(r);const l=e.XpG();return e.Njj(l.toggleCreateUserModal(s))}),e.k0s()()}}let E=(()=>{class t{constructor(){this.userService=(0,e.WQX)(m.D),this.unsubscribe$=new F.B,this.users$=new U.t([]),this.isModalOpen=(0,e.vPA)(!1)}ngOnInit(){this.loadUsers()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadUsers(r=1,n=50,s="",l="ASC"){this.userService.getUsers(r,n,s,l).subscribe(R=>{this.users$.next(R.items)})}search(r){this.userService.getUsers(1,50,r,"ASC").pipe((0,w.Q)(this.unsubscribe$)).subscribe({next:n=>{this.users$.next(n.items)},error:()=>{console.log("No user found with given name")}})}toggleCreateUserModal(r=null){r&&this.addUserToTable(r),this.isModalOpen.set(!this.isModalOpen())}addUserToTable(r){this.users$.next([...this.users$.value,r]),console.log("User added successfully")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-view-users"]],standalone:!0,features:[e.aNF],decls:22,vars:3,consts:[[1,"max-w-7xl","mx-auto","gap-4","p-6","sm:p-4","sm:z-10","sm:mb-12"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold","text-gray-900","dark:text-gray-100"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","duration-200",3,"click"],[1,"bg-white","dark:bg-gray-800","shadow-sm","rounded-lg","overflow-hidden","border","border-gray-200","dark:border-gray-700"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-700"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","dark:text-gray-100"],[1,"px-6","py-4","whitespace-nowrap"],[3,"ngClass"],[3,"close"],[3,"userCreated"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"header",1)(2,"h1",2),e.EFF(3,"Users"),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return s.toggleCreateUserModal()}),e.EFF(5," Add user "),e.k0s()(),e.j41(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead",7)(10,"tr")(11,"th",8),e.EFF(12," Name"),e.k0s(),e.j41(13,"th",8),e.EFF(14," Email"),e.k0s(),e.j41(15,"th",8),e.EFF(16," Role"),e.k0s()()(),e.j41(17,"tbody",9),e.Z7z(18,$,8,7,"tr",10,e.Vm6),e.nI1(20,"async"),e.k0s()()()()(),e.DNE(21,_,2,0,"app-modal")),2&n&&(e.R7$(18),e.Dyx(e.bMT(20,1,s.users$)),e.R7$(3),e.vxM(21,s.isModalOpen()?21:-1))},dependencies:[c.YU,c.Jj,k,N.z],encapsulation:2})}}return t})()}}]);