"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[344],{6344:(C,d,o)=>{o.r(d),o.d(d,{UserProfileComponent:()=>_});var p=o(177),e=o(4438),t=o(4341),h=o(4893),c=o(5423),f=o(3443),g=o(3587);function m(r,u){1&r&&e.nrm(0,"span",17)}function P(r,u){1&r&&(e.j41(0,"p",18),e.EFF(1," Passwords don't match "),e.k0s())}function w(r,u){1&r&&e.nrm(0,"span",17)}let _=(()=>{class r{constructor(){this.authService=(0,e.WQX)(h.u),this.userService=(0,e.WQX)(f.D),this.toastService=(0,e.WQX)(c.f),this.btnColor=g.c.btnColor,this.loading=!1,this.userFullname="",this.userEmail="",this.updatePasswordModel=(0,e.vPA)({userId:0,currentPassword:"",newPassword:"",confirmNewPassword:""}),this.hasUpperCase=(0,e.vPA)(!1),this.hasLowerCase=(0,e.vPA)(!1),this.hasNumbers=(0,e.vPA)(!1),this.hasSpecialChars=(0,e.vPA)(!1),this.hasSixChars=(0,e.vPA)(!1)}ngOnInit(){this.authService.user&&(this.userFullname=this.authService.user.unique_name,this.userEmail=this.authService.user.email)}updateUserProfile(){(this.userEmail!==this.authService.user?.email||this.userFullname!==this.authService.user.unique_name)&&(this.loading=!0,this.userService.updateUserProfile(this.userFullname,this.userEmail,this.authService.user?.nameid).subscribe({next:()=>{this.loading=!1,this.toastService.showSuccess("Your profile was updated successfully. Please, log in again."),this.authService.logout()},error:()=>{this.loading=!1,this.toastService.showError("There was an error updating your profile.")}}))}updatePassword(){this.updatePasswordModel().newPassword&&this.updatePasswordModel().confirmNewPassword?this.updatePasswordModel().newPassword===this.updatePasswordModel().confirmNewPassword?(this.loading=!1,this.updatePasswordModel().userId=Number(this.authService.user?.nameid),this.userService.updateUserPassword(this.updatePasswordModel()).subscribe({next:()=>{this.loading=!1,this.toastService.showSuccess("Your password was updated successfully. Please, log in again."),this.authService.logout()},error:a=>{a.error.data.validationErrors.forEach(s=>{this.toastService.showError(s)}),this.loading=!1}})):this.toastService.showError("Password and confirm password dont match"):this.toastService.showError("Please, fill in the password and confirm password fields")}arePasswordChecksTrue(){return this.hasLowerCase()&&this.hasNumbers()&&this.hasSixChars()&&this.hasSpecialChars()&&this.hasUpperCase()}passwordChecker(){const a=this.updatePasswordModel().newPassword;this.hasSixChars.set(a.length>=6),this.hasUpperCase.set(/[A-Z]/.test(a)),this.hasLowerCase.set(/[a-z]/.test(a)),this.hasNumbers.set(/\d/.test(a)),this.hasSpecialChars.set(/[!@#$%^&*(),.?":{}|<>]/.test(a))}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-user-profile"]],standalone:!0,features:[e.aNF],decls:51,vars:15,consts:[[1,"profile-container"],[1,"profile-title"],[1,"profile-row"],[1,"profile-col"],[1,"profile-section"],[1,"section-title"],[1,"form-group"],["name","fullName","type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["name","email","type","email","placeholder","Enter email",3,"ngModelChange","ngModel"],["type","button",1,"save-btn",3,"click","disabled"],["class","spinner","role","status","aria-hidden","true",4,"ngIf"],["type","password","placeholder","Enter current password","name","currentPassword",3,"ngModelChange","ngModel"],["type","password","placeholder","Enter new password","name","newPassword",3,"ngModelChange","input","ngModel"],[1,"password-checks"],["type","password","placeholder","Confirm new password","name","confirmNewPassword",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","button",1,"change-password-btn",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner"],[1,"error-message"]],template:function(l,s){1&l&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Profile"),e.k0s(),e.j41(3,"form")(4,"div",2)(5,"div",3)(6,"section",4)(7,"h2",5),e.EFF(8,"Personal Information"),e.k0s(),e.j41(9,"div",6)(10,"label"),e.EFF(11,"Full name"),e.k0s(),e.j41(12,"input",7),e.mxI("ngModelChange",function(n){return e.DH7(s.userFullname,n)||(s.userFullname=n),n}),e.k0s()(),e.j41(13,"div",6)(14,"label"),e.EFF(15,"E-mail"),e.k0s(),e.j41(16,"input",8),e.mxI("ngModelChange",function(n){return e.DH7(s.userEmail,n)||(s.userEmail=n),n}),e.k0s()(),e.j41(17,"button",9),e.bIt("click",function(){return s.updateUserProfile()}),e.EFF(18," Save User Information "),e.DNE(19,m,1,0,"span",10),e.k0s()()(),e.j41(20,"div",3)(21,"section",4)(22,"h2",5),e.EFF(23,"Change Your Password"),e.k0s(),e.j41(24,"div",6)(25,"label"),e.EFF(26,"Current Password"),e.k0s(),e.j41(27,"input",11),e.mxI("ngModelChange",function(n){return e.DH7(s.updatePasswordModel().currentPassword,n)||(s.updatePasswordModel().currentPassword=n),n}),e.k0s()(),e.j41(28,"div",6)(29,"label"),e.EFF(30,"New Password"),e.k0s(),e.j41(31,"input",12),e.mxI("ngModelChange",function(n){return e.DH7(s.updatePasswordModel().newPassword,n)||(s.updatePasswordModel().newPassword=n),n}),e.bIt("input",function(){return s.passwordChecker()}),e.k0s(),e.j41(32,"div",13)(33,"p"),e.EFF(34),e.k0s(),e.j41(35,"p"),e.EFF(36),e.k0s(),e.j41(37,"p"),e.EFF(38),e.k0s(),e.j41(39,"p"),e.EFF(40),e.k0s(),e.j41(41,"p"),e.EFF(42),e.k0s()()(),e.j41(43,"div",6)(44,"label"),e.EFF(45,"Confirm New Password"),e.k0s(),e.j41(46,"input",14),e.mxI("ngModelChange",function(n){return e.DH7(s.updatePasswordModel().confirmNewPassword,n)||(s.updatePasswordModel().confirmNewPassword=n),n}),e.k0s(),e.DNE(47,P,2,0,"p",15),e.k0s(),e.j41(48,"button",16),e.bIt("click",function(){return s.updatePassword()}),e.EFF(49," Change Password "),e.DNE(50,w,1,0,"span",10),e.k0s()()()()()()),2&l&&(e.R7$(12),e.R50("ngModel",s.userFullname),e.R7$(4),e.R50("ngModel",s.userEmail),e.R7$(),e.Y8G("disabled",s.loading),e.R7$(2),e.Y8G("ngIf",s.loading),e.R7$(8),e.R50("ngModel",s.updatePasswordModel().currentPassword),e.R7$(4),e.R50("ngModel",s.updatePasswordModel().newPassword),e.R7$(3),e.SpI("LowerCase ",s.hasLowerCase()?"\u2705":"\u274c",""),e.R7$(2),e.SpI("UpperCase ",s.hasUpperCase()?"\u2705":"\u274c",""),e.R7$(2),e.SpI("Numbers ",s.hasNumbers()?"\u2705":"\u274c",""),e.R7$(2),e.SpI("Special Chars ",s.hasSpecialChars()?"\u2705":"\u274c",""),e.R7$(2),e.SpI("Six Chars ",s.hasSixChars()?"\u2705":"\u274c",""),e.R7$(4),e.R50("ngModel",s.updatePasswordModel().confirmNewPassword),e.R7$(),e.Y8G("ngIf",s.updatePasswordModel().confirmNewPassword.length&&s.updatePasswordModel().newPassword!==s.updatePasswordModel().confirmNewPassword),e.R7$(),e.Y8G("disabled",s.loading||!s.arePasswordChecksTrue()),e.R7$(2),e.Y8G("ngIf",s.loading))},dependencies:[p.MD,p.bT,t.YN,t.qT,t.me,t.BC,t.cb,t.vS,t.cV],styles:[".profile-container[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n\n  .profile-title[_ngcontent-%COMP%] {\n    font-size: 32px;\n    margin-bottom: 16px;\n  }\n\n  .profile-row[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n  }\n\n  .profile-col[_ngcontent-%COMP%] {\n    flex: 1 1 calc(50% - 16px);\n    margin-bottom: 16px;\n  }\n\n  .profile-section[_ngcontent-%COMP%] {\n    padding: 16px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    background-color: #f9f9f9;\n    height: 100%;\n  }\n\n  .section-title[_ngcontent-%COMP%] {\n    text-align: center;\n    font-size: 24px;\n    margin-bottom: 16px;\n  }\n\n  .form-group[_ngcontent-%COMP%] {\n    margin-bottom: 16px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n    margin-bottom: 8px;\n    font-weight: bold;\n  }\n\n  .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n    padding: 8px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n\n  .password-checks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    margin: 4px 0;\n  }\n\n  .error-message[_ngcontent-%COMP%] {\n    color: red;\n    font-size: 14px;\n    margin-top: 8px;\n  }\n\n  .save-btn[_ngcontent-%COMP%], .change-password-btn[_ngcontent-%COMP%] {\n    padding: 12px 16px;\n    font-size: 16px;\n    color: white;\n    background-color: #007bff;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    width: 100%;\n  }\n\n  .save-btn[_ngcontent-%COMP%]:disabled, .change-password-btn[_ngcontent-%COMP%]:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n\n  .spinner[_ngcontent-%COMP%] {\n    margin-left: 8px;\n    border: 2px solid #f3f3f3;\n    border-top: 2px solid #007bff;\n    border-radius: 50%;\n    width: 16px;\n    height: 16px;\n    animation: _ngcontent-%COMP%_spin 1s linear infinite;\n  }\n\n  @keyframes _ngcontent-%COMP%_spin {\n    0% {\n      transform: rotate(0deg);\n    }\n\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  \n\n  @media (max-width: 600px) {\n    .profile-col[_ngcontent-%COMP%] {\n      flex: 1 1 100%;\n    }\n  }"]})}}return r})()}}]);