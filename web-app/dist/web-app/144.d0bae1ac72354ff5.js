"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[144],{144:(R,u,i)=>{i.r(u),i.d(u,{ViewUsersComponent:()=>$});var c=i(177),e=i(4438),o=i(4341),m=function(t){return t[t.Admin=1]="Admin",t[t.User=2]="User",t}(m||{}),g=i(980),h=i(3587),b=i(9840),p=i(3443),f=i(5423);function C(t,l){1&t&&(e.j41(0,"div"),e.EFF(1,"Name is required."),e.k0s())}function _(t,l){1&t&&(e.j41(0,"div"),e.EFF(1," Name must be at least 2 characters long. "),e.k0s())}function v(t,l){if(1&t&&(e.j41(0,"div",18),e.DNE(1,C,2,0,"div",19)(2,_,2,0,"div",19),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.fullName.errors?null:n.fullName.errors.required),e.R7$(),e.Y8G("ngIf",null==n.fullName.errors?null:n.fullName.errors.minlength)}}function x(t,l){1&t&&(e.j41(0,"div"),e.EFF(1,"Email is required."),e.k0s())}function F(t,l){1&t&&(e.j41(0,"div"),e.EFF(1,"Email is invalid."),e.k0s())}function U(t,l){if(1&t&&(e.j41(0,"div",18),e.DNE(1,x,2,0,"div",19)(2,F,2,0,"div",19),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.email.errors?null:n.email.errors.required),e.R7$(),e.Y8G("ngIf",null==n.email.errors?null:n.email.errors.email)}}function k(t,l){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=l.$implicit;e.Y8G("value",n.id),e.R7$(),e.SpI(" ",n.name," ")}}function O(t,l){1&t&&e.nrm(0,"span",21)}function M(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",2)(1,"h2",3),e.EFF(2),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){const s=e.eBV(n).$implicit,a=e.XpG();return e.Njj(a.closeModal(s))}),e.EFF(4,"\xd7"),e.k0s()(),e.j41(5,"div",5)(6,"form",6)(7,"div",7)(8,"label",8),e.EFF(9,"Full name"),e.k0s(),e.nrm(10,"input",9),e.DNE(11,v,3,2,"div",10),e.k0s(),e.j41(12,"div",7)(13,"label",11),e.EFF(14,"Email address"),e.k0s(),e.nrm(15,"input",12),e.DNE(16,U,3,2,"div",10),e.k0s(),e.j41(17,"div",7)(18,"label"),e.EFF(19,"Role"),e.k0s(),e.j41(20,"select",13),e.DNE(21,k,2,2,"option",14),e.k0s()()()(),e.j41(22,"div",15)(23,"button",16),e.bIt("click",function(){const s=e.eBV(n).$implicit,a=e.XpG();return e.Njj(a.createCryptoAsset(s))}),e.EFF(24,"Save "),e.DNE(25,O,1,0,"span",17),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(2),e.JRh(n.title),e.R7$(4),e.Y8G("formGroup",n.createUserForm),e.R7$(5),e.Y8G("ngIf",n.fullName.invalid&&(n.fullName.dirty||n.fullName.touched)),e.R7$(5),e.Y8G("ngIf",n.email.invalid&&(n.email.dirty||n.email.touched)),e.R7$(5),e.Y8G("ngForOf",n.roles),e.R7$(2),e.Y8G("disabled",!n.createUserForm.valid),e.R7$(2),e.Y8G("ngIf",n.loading)}}let j=(()=>{class t{constructor(n,r,s,a){this.modalService=n,this.fb=r,this.userService=s,this.toastService=a,this.btnColor=h.c.btnColor,this.loading=!1,this.title="New user",this.roleId=0,this.roles=[{id:1,name:"admin"},{id:2,name:"user"}],this.createUserForm=this.fb.group({fullName:["",[o.k0.minLength(2),o.k0.maxLength(225)]],email:["",[o.k0.email]],role:[0]}),this.userCreated=new e.bkB}open(n){this.modalService.open(n)}closeModal(n){n.close()}createCryptoAsset(n){this.loading=!0;const r=this.getRole();if(void 0===r)return;const s={fullName:this.fullName.value,email:this.email.value,role:r};this.userService.createUser(s).pipe((0,g.j)(()=>{this.loading=!1})).subscribe({next:()=>{n.close(),this.userCreated.emit(s),this.userCreated.complete(),this.toastService.showSuccess("User added successfully")},error:a=>{this.toastService.showError(a.error.message)}})}get fullName(){return this.createUserForm.get("fullName")}get email(){return this.createUserForm.get("email")}getRole(){return 1==this.createUserForm.value?.role?m.Admin:m.User}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(b.Bq),e.rXU(o.ok),e.rXU(p.D),e.rXU(f.f))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-create-user"]],outputs:{userCreated:"userCreated"},standalone:!0,features:[e.aNF],decls:4,vars:0,consts:[["content",""],["type","button",1,"add-btn",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close-btn",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["for","formGroupExampleInput"],["maxlength","220","minlength","2","type","text","formControlName","fullName","required",""],["class","error-message",4,"ngIf"],["for","exampleFormControlInput1"],["maxlength","220","type","email","formControlName","email","required",""],["aria-label","Role selector","formControlName","role","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"save-btn",3,"click","disabled"],["class","spinner","role","status","aria-hidden","true",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner"]],template:function(r,s){if(1&r){const a=e.RV6();e.DNE(0,M,26,7,"ng-template",null,0,e.C5r),e.j41(2,"button",1),e.bIt("click",function(){e.eBV(a);const S=e.sdS(1);return e.Njj(s.open(S))}),e.EFF(3," Add user\n"),e.k0s()}},dependencies:[c.MD,c.Sq,c.bT,o.YN,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.YS,o.xh,o.tU,o.X1,o.j4,o.JD],styles:[".modal-header[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px;\n    border-bottom: 1px solid #ccc;\n  }\n\n  .modal-title[_ngcontent-%COMP%] {\n    margin: 0;\n    font-size: 24px;\n  }\n\n  .close-btn[_ngcontent-%COMP%] {\n    background: none;\n    border: none;\n    font-size: 24px;\n    cursor: pointer;\n  }\n\n  .modal-body[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n\n  .form-group[_ngcontent-%COMP%] {\n    margin-bottom: 16px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n    margin-bottom: 8px;\n    font-weight: bold;\n  }\n\n  .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\n    padding: 8px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n\n  .error-message[_ngcontent-%COMP%] {\n    color: red;\n    font-size: 14px;\n    margin-top: 8px;\n  }\n\n  .modal-footer[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: flex-end;\n    padding: 16px;\n    border-top: 1px solid #ccc;\n  }\n\n  .save-btn[_ngcontent-%COMP%] {\n    padding: 8px 16px;\n    font-size: 16px;\n    color: white;\n    background-color: #007bff;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n\n  .save-btn[_ngcontent-%COMP%]:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n\n  .spinner[_ngcontent-%COMP%] {\n    margin-left: 8px;\n    border: 2px solid #f3f3f3;\n    border-top: 2px solid #007bff;\n    border-radius: 50%;\n    width: 16px;\n    height: 16px;\n    animation: _ngcontent-%COMP%_spin 1s linear infinite;\n  }\n\n  @keyframes _ngcontent-%COMP%_spin {\n    0% {\n      transform: rotate(0deg);\n    }\n\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  .add-btn[_ngcontent-%COMP%] {\n    padding: 8px 16px;\n    font-size: 16px;\n    color: white;\n    background-color: #28a745;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n\n  .add-btn[_ngcontent-%COMP%]:hover {\n    background-color: #218838;\n  }"]})}}return t})();var N=i(4412),E=i(1413),P=i(6977);function y(t,l){if(1&t&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&t){const n=l.$implicit;e.R7$(2),e.JRh(n.fullName),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(1==n.role?"Admin":"User")}}let $=(()=>{class t{constructor(n,r){this.userService=n,this.toastService=r,this.users$=new N.t([]),this.unsubscribe$=new E.B}ngOnInit(){this.loadUsers()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadUsers(n=1,r=50,s="",a="ASC"){this.userService.getUsers(n,r,s,a).subscribe(d=>{this.users$.next(d.items)})}addUserToTable(n){this.users$.next([...this.users$.value,n]),this.toastService.showSuccess("User added successfully")}search(n){this.userService.getUsers(1,50,n,"ASC").pipe((0,P.Q)(this.unsubscribe$)).subscribe({next:r=>{this.users$.next(r.items)},error:()=>{this.toastService.showError("No user found with given name")}})}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(p.D),e.rXU(f.f))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-view-users"]],standalone:!0,features:[e.aNF],decls:18,vars:3,consts:[[1,"users-container"],[1,"users-header"],[3,"userCreated"],[1,"table-container"],[1,"users-table"],[4,"ngFor","ngForOf"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"h1"),e.EFF(3,"Users"),e.k0s(),e.j41(4,"app-create-user",2),e.bIt("userCreated",function(d){return s.addUserToTable(d)}),e.k0s()(),e.j41(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),e.EFF(10,"Name"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Email"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Role"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,y,7,3,"tr",5),e.nI1(17,"async"),e.k0s()()()()),2&r&&(e.R7$(16),e.Y8G("ngForOf",e.bMT(17,1,s.users$)))},dependencies:[c.MD,c.Sq,c.Jj,j],styles:[".users-container[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n\n  .users-header[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n  }\n\n  .users-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\n    margin: 0;\n    font-size: 24px;\n  }\n\n  .table-container[_ngcontent-%COMP%] {\n    overflow-x: auto;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    padding: 16px;\n    background-color: #f9f9f9;\n  }\n\n  .users-table[_ngcontent-%COMP%] {\n    width: 100%;\n    border-collapse: collapse;\n  }\n\n  .users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n    border: 1px solid #ccc;\n    padding: 8px;\n    text-align: left;\n  }\n\n  .users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\n    background-color: #f4f4f4;\n    font-weight: bold;\n  }\n\n  .users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) {\n    background-color: #f9f9f9;\n  }"]})}}return t})()}}]);